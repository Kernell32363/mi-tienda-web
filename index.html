<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyASur.Ok - Lujo Metalizado</title>
    
    <!-- Script de Tailwind CSS para el diseño -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuente Inter de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <!-- Iconos de Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Definición de la Paleta Metalizada */
        :root {
            --color-black-deep: #0A0A0A;    /* Fondo casi puro */
            --color-silver: #D4D4D4;        /* Texto principal */
            --color-gold: #FFD700;          /* Acento principal (Botones) */
            --color-rosegold: #B76E79;      /* Acento secundario (Subtítulos, bordes) */
            --color-white-ghost: #FAFAFA;   /* Texto secundario y fondo claro */
        }

        /* Configuración de Tailwind */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'black-deep': 'var(--color-black-deep)',
                        'silver': 'var(--color-silver)',
                        'gold': 'var(--color-gold)',
                        'rosegold': 'var(--color-rosegold)',
                        'white-ghost': 'var(--color-white-ghost)',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }

        /* Estilos generales */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-black-deep);
            color: var(--color-silver);
        }

        /* Estilo para el botón de acento con gradiente */
        .btn-gold {
            background-image: linear-gradient(to right, #FFD700, #F0C419);
            color: var(--color-black-deep);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        .btn-gold:hover {
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
            transform: translateY(-2px);
        }

        /* Estilo para la tarjeta de producto con brillo sutil */
        .product-card {
            box-shadow: 0 0 10px rgba(183, 110, 121, 0.1);
        }
        .product-card:hover {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2), 0 0 40px rgba(183, 110, 121, 0.1);
        }

        /* Contenedor de mensajes */
        #message-container {
            pointer-events: none;
        }
        
        .interactive-message {
            pointer-events: auto;
            cursor: pointer;
            /* Se ha eliminado el backdrop-blur-md para evitar el difuminado */
        }

        /* Estilos para el scrollbar del modal de carrito */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #171717;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--color-rosegold);
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: var(--color-gold);
        }

    </style>
</head>
<body class="min-h-screen antialiased">

    <!-- Script de Firebase (Lógica operativa - CORREGIDA) -->
    <script type="module">
        // --- Imports de Firebase (Completos) ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, runTransaction, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // setLogLevel('debug'); // Descomentar para ver logs de Firestore

        let app, db, auth, userId;
        const products = [
            // Definición de productos alinea con los data-id de la UI
            { id: '1', name: 'Éxtasis Dorado', price: 4500.00, image: 'https://placehold.co/600x400/111827/FFD700?text=Éxtasis+Dorado' },
            { id: '2', name: 'Esencia Nocturna', price: 2800.00, image: 'https://placehold.co/600x400/111827/B76E79?text=Esencia+Nocturna' },
            { id: '4', name: 'Fénix de Plata', price: 6200.00, image: 'https://placehold.co/600x400/111827/D4D4D4?text=Fénix+de+Plata' },
        ];


        // --- INICIALIZACIÓN Y AUTENTICACIÓN ---

        async function initializeFirebase() {
            try {
                const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                if (typeof __initial_auth_token !== 'undefined') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        setupCartListener();
                        updateUserIdDisplay(userId);
                        updateUserIdDisplayModal(userId);
                    } else {
                        userId = null;
                        updateCartDisplay({});
                    }
                });

            } catch (error) {
                console.error("Error al inicializar Firebase o autenticar:", error);
                window.showMessage('Error al conectar con el servidor. Inténtalo de nuevo.', 'error');
            }
        }

        // --- LISTENER DEL CARRITO (MODELO COLECCIÓN: /artifacts/{appId}/users/{userId}/cart/{itemId}) ---

        /**
         * Configura el listener en tiempo real para el carrito de compras (colección).
         */
        function setupCartListener() {
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            // Listener a la colección
            const cartRef = collection(db, `artifacts/${appId}/users/${userId}/cart`);
            
            onSnapshot(cartRef, (snapshot) => {
                const cartItems = {};
                let totalItems = 0;
                
                snapshot.forEach((doc) => {
                    const item = doc.data();
                    // Usar doc.id (que es el productId) como clave, y añadir el docId para operaciones
                    cartItems[doc.id] = { ...item, docId: doc.id }; 
                    totalItems += item.quantity;
                });
                updateCartDisplay(cartItems, totalItems); 
            }, (error) => {
                console.error("Error al escuchar el carrito:", error);
                window.showMessage('Error al actualizar el carrito en tiempo real.', 'error');
            });
        }


        // --- FUNCIONES GLOBALES PARA ONCLICK ---
        
        /**
         * Actualiza el ID de usuario en la interfaz principal.
         */
        function updateUserIdDisplay(id) {
            const userIdDisplay = document.getElementById('user-id-display');
            if (userIdDisplay) {
                userIdDisplay.textContent = id;
            }
        }
        
        /**
         * Actualiza el ID de usuario en el modal del carrito.
         */
        function updateUserIdDisplayModal(id) {
            const userIdDisplay = document.getElementById('user-id-display-modal');
            if (userIdDisplay) {
                userIdDisplay.textContent = id;
            }
        }

        /**
         * Muestra un mensaje flotante de notificación.
         */
        window.showMessage = (text, type = 'info') => {
            const container = document.getElementById('message-container');
            if (!container) return;
            
            // Eliminar mensajes anteriores para evitar sobrecarga visual
            container.innerHTML = ''; 

            const message = document.createElement('div');
            let icon;
            let bgColorClasses;

            // Determinar clases y icono según el tipo
            switch (type) {
                case 'success':
                    icon = 'check-circle';
                    // **CORRECCIÓN:** Fondo sólido sin opacidad para máxima legibilidad.
                    bgColorClasses = 'bg-green-600 text-white-ghost shadow-xl shadow-green-700/50'; 
                    break;
                case 'error':
                    icon = 'x-octagon';
                    bgColorClasses = 'bg-red-700 text-white-ghost shadow-xl shadow-red-700/50';
                    break;
                case 'warning':
                    icon = 'alert-triangle';
                    bgColorClasses = 'bg-yellow-500 text-black-deep shadow-xl shadow-yellow-500/50'; 
                    break;
                case 'info':
                default:
                    icon = 'info';
                    bgColorClasses = 'bg-gray-700 text-white-ghost shadow-xl shadow-gray-700/50';
            }

            // Aplicar clases de estilo base. Usamos z-50 para asegurar el frente.
            // Opacidad y transformación se controlan para la animación de entrada/salida.
            message.className = `interactive-message p-4 rounded-xl z-50 transform transition-all duration-300 ease-in-out opacity-0 translate-x-full ${bgColorClasses}`;
            
            // Contenido HTML con el botón de cierre
            message.innerHTML = `
                <div class="flex items-center justify-between w-full" onclick="this.closest('.interactive-message').remove()">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="${icon}" class="w-5 h-5 flex-shrink-0"></i>
                        <p class="font-medium text-sm">${text}</p>
                    </div>
                    <!-- Botón de Cierre Manual -->
                    <i data-lucide="x" class="w-5 h-5 ml-4 flex-shrink-0"></i>
                </div>
            `;
            
            container.appendChild(message);

            // Animar entrada (aparecer en el centro, deslizarse desde la derecha)
            setTimeout(() => {
                message.classList.remove('opacity-0', 'translate-x-full');
                message.classList.add('opacity-100', 'translate-x-0');
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, 10); // Pequeño retraso para asegurar la transición

            // Ocultar automáticamente después de 4 segundos
            setTimeout(() => {
                message.classList.remove('opacity-100', 'translate-x-0');
                message.classList.add('opacity-0', 'translate-x-full'); // Deslizar hacia la derecha para salir
                message.addEventListener('transitionend', () => message.remove());
            }, 4000);
        };


        /**
         * Actualiza la visualización del carrito y el contador.
         */
        function updateCartDisplay(cartItems, totalItems = 0) {
            const cartItemsContainer = document.getElementById('cart-items-container');
            const cartTotalDisplay = document.getElementById('cart-total-display');
            const cartCounter = document.getElementById('cart-counter');
            let total = 0;

            if (cartItemsContainer) {
                cartItemsContainer.innerHTML = ''; 

                if (Object.keys(cartItems).length === 0) {
                    cartItemsContainer.innerHTML = '<p class="text-center text-silver/60 py-8 px-4">El carrito está vacío. ¡Es momento de invertir en tu lujo!</p>';
                } else {
                    Object.values(cartItems).forEach(item => {
                        const itemTotal = item.price * item.quantity;
                        total += itemTotal;

                        const itemElement = document.createElement('div');
                        // Diseño mejorado de la tarjeta de ítem en el modal
                        itemElement.className = 'flex items-center justify-between p-4 bg-gray-900/50 border-b border-gold/10 transition-colors hover:bg-gray-800/80';
                        
                        itemElement.innerHTML = `
                            <div class="flex-grow">
                                <p class="font-semibold text-silver text-lg">${item.name}</p>
                                <p class="text-sm text-rosegold">$${item.price.toFixed(2)} x <span class="font-bold">${item.quantity}</span> unidad(es)</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="font-extrabold text-gold text-xl">$${itemTotal.toFixed(2)}</span>
                                <div class="flex items-center space-x-1 border border-rosegold/50 rounded-lg p-0.5">
                                    <button onclick="window.updateQuantity('${item.docId}', ${item.quantity - 1})" 
                                        class="text-silver hover:text-gold transition-colors p-1 rounded-md"
                                        aria-label="Disminuir cantidad">
                                        <i data-lucide="minus" class="w-4 h-4"></i>
                                    </button>
                                    <button onclick="window.updateQuantity('${item.docId}', ${item.quantity + 1})" 
                                        class="text-silver hover:text-gold transition-colors p-1 rounded-md"
                                        aria-label="Aumentar cantidad">
                                        <i data-lucide="plus" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                        cartItemsContainer.appendChild(itemElement);
                    });
                }

                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }

            // Actualizar total y contador
            if (cartTotalDisplay) {
                cartTotalDisplay.textContent = total.toFixed(2);
            }
            if (cartCounter) {
                cartCounter.textContent = totalItems.toString();
                cartCounter.classList.toggle('hidden', totalItems === 0);
            }
        }


        /**
         * Agrega un producto al carrito o incrementa su cantidad (MODELO COLECCIÓN).
         */
        window.addToCart = async function(productId) {
            if (!userId || !db) {
                window.showMessage('Error: El sistema de usuario se está inicializando.', 'error');
                return;
            }

            const product = products.find(p => p.id === productId);
            if (!product) {
                window.showMessage('Error: Producto no encontrado.', 'error');
                return;
            }

            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const cartRef = collection(db, `artifacts/${appId}/users/${userId}/cart`);

            try {
                // Usamos el productId como ID del documento dentro de la colección 'cart'
                const docRef = doc(cartRef, productId);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const newQuantity = docSnap.data().quantity + 1;
                    await updateDoc(docRef, { quantity: newQuantity });
                } else {
                    await setDoc(docRef, {
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        quantity: 1,
                    });
                }
                window.showMessage(`"${product.name}" añadido al carrito.`, 'success');

            } catch (error) {
                console.error("Error al añadir al carrito:", error);
                window.showMessage('Error al añadir el producto al carrito.', 'error');
            }
        }

        /**
         * Actualiza la cantidad de un ítem en el carrito o lo elimina.
         */
        window.updateQuantity = async function(docId, newQuantity) {
            if (!userId || !db) return;

            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            // docId es el mismo que productId
            const docRef = doc(db, `artifacts/${appId}/users/${userId}/cart`, docId); 

            if (newQuantity <= 0) {
                try {
                    await deleteDoc(docRef);
                    window.showMessage('Producto eliminado del carrito.', 'info');
                } catch (error) {
                    console.error("Error al eliminar del carrito:", error);
                    window.showMessage('Error al eliminar el producto.', 'error');
                }
            } else {
                try {
                    await updateDoc(docRef, { quantity: newQuantity });
                } catch (error) {
                    console.error("Error al actualizar cantidad:", error);
                    window.showMessage('Error al actualizar la cantidad del producto.', 'error');
                }
            }
        }


        /**
         * Alterna la visibilidad del modal del carrito.
         */
        window.toggleCartModal = function() {
            const cartModal = document.getElementById('cart-modal');
            if (cartModal) {
                cartModal.classList.toggle('hidden');
                document.body.classList.toggle('overflow-hidden', !cartModal.classList.contains('hidden'));
            }
        }

        /**
         * Maneja el proceso de pago (checkout) con número de pedido persistente.
         */
        window.checkout = async function() {
            if (!auth.currentUser || !db) {
                window.showMessage('Error: El usuario no está autenticado o la base de datos no está lista.', 'error');
                return;
            }

            const userId = auth.currentUser.uid;
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const cartRef = collection(db, `artifacts/${appId}/users/${userId}/cart`);

            const checkoutButton = document.getElementById('checkout-button');
            if (checkoutButton) {
                checkoutButton.disabled = true;
                checkoutButton.classList.add('opacity-50', 'cursor-not-allowed');
            }

            try {
                const querySnapshot = await getDocs(cartRef);

                if (querySnapshot.empty) {
                    window.showMessage('El carrito está vacío. ¡No hay nada que comprar!', 'warning');
                    return;
                }
                
                // Lógica de Número de Pedido Persistente (Público)
                const ORDER_COUNTER_PATH = `artifacts/${appId}/public/data/metadata/orderCounter`;
                const STARTING_ORDER_NUMBER = 3000;

                let orderNumber;

                // Transacción para obtener e incrementar el contador de pedidos
                await runTransaction(db, async (transaction) => {
                    const orderCounterRef = doc(db, ORDER_COUNTER_PATH);
                    const counterSnap = await transaction.get(orderCounterRef);
                    let currentCount = 0;

                    if (counterSnap.exists()) {
                        currentCount = counterSnap.data().lastOrderNumber || 0;
                    }

                    const newCount = currentCount + 1;
                    orderNumber = STARTING_ORDER_NUMBER + newCount;

                    // Actualizar el contador
                    transaction.set(orderCounterRef, { lastOrderNumber: newCount }, { merge: true });
                });

                // Limpiar el carrito (eliminar todos los documentos de la colección)
                const deletePromises = [];
                querySnapshot.forEach((docSnap) => {
                    // Se debe crear una referencia de documento completa para deleteDoc
                    const docToDeleteRef = doc(db, cartRef.path, docSnap.id);
                    deletePromises.push(deleteDoc(docToDeleteRef));
                });
                await Promise.all(deletePromises);

                window.showMessage(`¡Compra finalizada! Número de pedido: #${orderNumber}. Revisa tu correo electrónico.`, 'success');

                const cartModal = document.getElementById('cart-modal');
                if (cartModal) {
                    cartModal.classList.add('hidden');
                    document.body.classList.remove('overflow-hidden');
                }

                // Opcional: Simular redirección a Instagram
                console.log(`Simulando redirección a Instagram para el pedido #${orderNumber}`);

            } catch (error) {
                console.error("Error al finalizar la compra:", error);
                window.showMessage(`Error al finalizar la compra: ${error.message}`, 'error');
            } finally {
                if (checkoutButton) {
                    checkoutButton.disabled = false;
                    checkoutButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
        }
        // --- FIN DE FUNCIONES GLOBALES ---

        // Lógica de UI (Menú Móvil, Iconos, Botones de Carrito)
        document.addEventListener('DOMContentLoaded', () => {
            initializeFirebase(); 
            
            // Lógica para el menú móvil
            const menuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (menuButton && mobileMenu) {
                menuButton.addEventListener('click', () => {
                    const icon = menuButton.querySelector('i');
                    const isHidden = mobileMenu.classList.contains('hidden');
                    mobileMenu.classList.toggle('hidden');
                    
                    if (isHidden) {
                        if (icon) icon.setAttribute('data-lucide', 'x');
                    } else {
                        if (icon) icon.setAttribute('data-lucide', 'menu');
                    }
                    
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                    }
                });
            }

            // Listener para los botones "Añadir al carrito"
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = e.currentTarget.getAttribute('data-id');
                    if (productId) {
                        // Llamada a la función global con el ID correcto
                        window.addToCart(productId);
                    }
                });
            });


            // Renderizar iconos iniciales
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
        
    </script>

    <!-- Contenedor principal para mensajes flotantes (fixed y sin pointer-events) -->
    <!-- Z-Index alto (z-[100]) para asegurar visibilidad sobre todos los modales. -->
    <div id="message-container" class="fixed top-4 right-4 z-[100] space-y-2"></div>

    <!-- Header / Navegación -->
    <header class="sticky top-0 z-50 bg-black-deep/95 backdrop-blur-sm border-b border-rosegold/20">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold tracking-widest text-gold">EyASur.Ok</div>
            
            <!-- Menú Desktop -->
            <div class="hidden md:flex space-x-8">
                <a href="#inicio" class="text-silver hover:text-gold transition-colors font-medium">Inicio</a>
                <a href="#coleccion" class="text-silver hover:text-gold transition-colors font-medium">Colección</a>
                <a href="#servicios" class="text-silver hover:text-gold transition-colors font-medium">Servicios</a>
                <a href="#contacto" class="text-silver hover:text-gold transition-colors font-medium">Contacto</a>
            </div>

            <!-- Iconos de Usuario y Carrito (Desktop) -->
            <div class="flex items-center space-x-4">
                 <div class="text-xs text-silver/50 hidden lg:block truncate max-w-[150px]">
                    ID: <span id="user-id-display" class="font-mono">Cargando...</span>
                </div>
                <button id="cart-button" onclick="window.toggleCartModal()" class="relative text-silver hover:text-gold transition-colors p-2 rounded-full" title="Carrito de Compras" aria-label="Abrir Carrito">
                    <i data-lucide="shopping-bag" class="w-6 h-6"></i>
                    <span id="cart-counter" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-black-deep transform translate-x-1/2 -translate-y-1/2 bg-gold rounded-full ring-2 ring-black-deep hidden">0</span>
                </button>
                
                <!-- Botón de Menú Móvil -->
                <button id="mobile-menu-button" class="md:hidden text-silver p-2 rounded-full" aria-label="Abrir Menú">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </nav>
        
        <!-- Menú Móvil (Desplegable) -->
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 border-t border-rosegold/10">
                <a href="#inicio" class="block px-3 py-2 rounded-md text-base font-medium text-silver hover:bg-rosegold/10 hover:text-gold transition-colors">Inicio</a>
                <a href="#coleccion" class="block px-3 py-2 rounded-md text-base font-medium text-silver hover:bg-rosegold/10 hover:text-gold transition-colors">Colección</a>
                <a href="#servicios" class="block px-3 py-2 rounded-md text-base font-medium text-silver hover:bg-rosegold/10 hover:text-gold transition-colors">Servicios</a>
                <a href="#contacto" class="block px-3 py-2 rounded-md text-base font-medium text-silver hover:bg-rosegold/10 hover:text-gold transition-colors">Contacto</a>
            </div>
        </div>
    </header>

    <main>
        <!-- Sección de Inicio (Hero) -->
        <section id="inicio" class="relative overflow-hidden pt-24 pb-12 md:pt-32 md:pb-20 bg-gradient-to-br from-black-deep to-gray-900/50 min-h-[60vh]">
            <div class="container mx-auto px-4 flex flex-col lg:flex-row items-center justify-between">
                <!-- Contenido de Texto -->
                <div class="lg:w-1/2 text-center lg:text-left mb-12 lg:mb-0">
                    <h1 class="text-5xl md:text-7xl font-extrabold leading-tight text-white-ghost mb-4">
                        Arte con <span class="text-gold">Lujo Metalizado</span>
                    </h1>
                    <p class="text-xl md:text-2xl text-rosegold/80 mb-8 font-light">
                        Donde la elegancia se encuentra con la vanguardia. Descubre piezas únicas que transformarán tu espacio.
                    </p>
                    <a href="#coleccion" class="btn-gold inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-semibold rounded-full shadow-lg hover:shadow-xl transition duration-300 uppercase tracking-wider">
                        Ver Colección Ahora
                    </a>
                </div>
                
                <!-- Imagen/Placeholder (Adaptado a la temática) -->
                <div class="lg:w-1/2 flex justify-center">
                    <img src="https://placehold.co/500x350/0A0A0A/FFD700?text=EyASur.Ok%0AColecci%C3%B3n+Exclusiva" 
                         alt="Arte moderno metalizado" 
                         class="w-full max-w-md rounded-2xl shadow-[0_0_50px_rgba(255,215,0,0.1),0_0_100px_rgba(183,110,121,0.2)] border border-gold/10 transition duration-500 hover:scale-[1.05] object-cover">
                </div>
            </div>
        </section>

        <!-- Sección de Colección Exclusiva -->
        <section id="coleccion" class="py-16 md:py-24 bg-color-black-deep text-color-silver">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-gold uppercase tracking-widest">
                    Colección Exclusiva
                </h2>
                
                <!-- CUADROS DE LA COLECCIÓN (Añadir al Carrito Corregido) -->
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Producto 1: Éxtasis Dorado (ID: 1) -->
                    <div class="product-card bg-gray-900/50 p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02] border border-rosegold/30">
                        <img src="https://placehold.co/600x400/111827/FFD700?text=Éxtasis+Dorado" 
                             alt="Cuadro Éxtasis Dorado" 
                             class="w-full h-48 object-cover rounded-lg mb-4 border border-gold/20">
                        <h3 class="text-2xl font-bold text-gold mb-2">Éxtasis Dorado</h3>
                        <p class="text-sm text-rosegold mb-4">Arte Abstracto. 120x80cm.</p>
                        <p class="text-silver mb-4 line-clamp-3">Una explosión de pan de oro y resina sobre lienzo negro, capturando el movimiento y la luz. Perfecto para salas de estar modernas.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xl font-extrabold text-white-ghost">$4.500 USD</span>
                            <button class="btn-gold px-4 py-2 text-sm font-semibold rounded-full uppercase add-to-cart" data-id="1">
                                Añadir 
                                <i data-lucide="shopping-cart" class="w-4 h-4 inline ml-1"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Producto 2: Esencia Nocturna (ID: 2) -->
                    <div class="product-card bg-gray-900/50 p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02] border border-rosegold/30">
                        <img src="https://placehold.co/600x400/111827/B76E79?text=Esencia+Nocturna" 
                             alt="Cuadro Esencia Nocturna" 
                             class="w-full h-48 object-cover rounded-lg mb-4 border border-rosegold/20">
                        <h3 class="text-2xl font-bold text-gold mb-2">Esencia Nocturna</h3>
                        <p class="text-sm text-rosegold mb-4">Minimalismo. 60x60cm.</p>
                        <p class="text-silver mb-4 line-clamp-3">Un estudio de la oscuridad con acentos sutiles de oro rosa. Trae calma y profundidad a cualquier dormitorio o estudio.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xl font-extrabold text-white-ghost">$2.800 USD</span>
                            <button class="btn-gold px-4 py-2 text-sm font-semibold rounded-full uppercase add-to-cart" data-id="2">
                                Añadir 
                                <i data-lucide="shopping-cart" class="w-4 h-4 inline ml-1"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Producto 3: Fénix de Plata (ID: 4) -->
                    <div class="product-card bg-gray-900/50 p-6 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02] border border-rosegold/30">
                        <img src="https://placehold.co/600x400/111827/D4D4D4?text=F%C3%A9nix+de+Plata" 
                             alt="Cuadro Fénix de Plata" 
                             class="w-full h-48 object-cover rounded-lg mb-4 border border-silver/20">
                        <h3 class="text-2xl font-bold text-gold mb-2">Fénix de Plata</h3>
                        <p class="text-sm text-rosegold mb-4">Figurativo. 100x150cm.</p>
                        <p class="text-silver mb-4 line-clamp-3">Representación dramática de un ave mítica con texturas de plata líquida. Una pieza central impactante.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-xl font-extrabold text-white-ghost">$6.200 USD</span>
                            <button class="btn-gold px-4 py-2 text-sm font-semibold rounded-full uppercase add-to-cart" data-id="4">
                                Añadir 
                                <i data-lucide="shopping-cart" class="w-4 h-4 inline ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Otras Secciones (Servicios y Contacto, simplificadas) -->
        <section id="servicios" class="py-16 md:py-24 bg-gray-900/50">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-4 text-gold">Nuestros Servicios</h2>
                <p class="text-rosegold text-lg mb-8">Personalización y asesoramiento exclusivo.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="p-6 bg-black-deep rounded-xl border border-rosegold/20 shadow-xl">
                        <i data-lucide="palette" class="w-10 h-10 mx-auto text-gold mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Arte a Medida</h3>
                        <p class="text-sm text-silver/80">Creación de piezas personalizadas según sus especificaciones de tamaño y paleta.</p>
                    </div>
                    <div class="p-6 bg-black-deep rounded-xl border border-rosegold/20 shadow-xl">
                        <i data-lucide="shield-check" class="w-10 h-10 mx-auto text-gold mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Certificación</h3>
                        <p class="text-sm text-silver/80">Todas las obras vienen con un certificado de autenticidad y origen de los materiales.</p>
                    </div>
                    <div class="p-6 bg-black-deep rounded-xl border border-rosegold/20 shadow-xl">
                        <i data-lucide="send" class="w-10 h-10 mx-auto text-gold mb-3"></i>
                        <h3 class="text-xl font-bold mb-2">Envío Global</h3>
                        <p class="text-sm text-silver/80">Embalaje de lujo y envío seguro a cualquier parte del mundo.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="contacto" class="py-16 md:py-24 bg-color-black-deep">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-4 text-gold">Contáctenos</h2>
                <p class="text-rosegold text-lg mb-8 max-w-xl mx-auto">Nuestro equipo de expertos en arte está listo para asistirte.</p>
                <!-- Formulario de Contacto (Placeholder) -->
                <form class="max-w-lg mx-auto space-y-4">
                    <input type="text" placeholder="Nombre completo" class="w-full p-3 rounded-lg bg-gray-800 text-silver border border-rosegold/30 focus:border-gold focus:ring-1 focus:ring-gold transition-colors" required>
                    <input type="email" placeholder="Correo electrónico" class="w-full p-3 rounded-lg bg-gray-800 text-silver border border-rosegold/30 focus:border-gold focus:ring-1 focus:ring-gold transition-colors" required>
                    <textarea rows="4" placeholder="Su mensaje o consulta" class="w-full p-3 rounded-lg bg-gray-800 text-silver border border-rosegold/30 focus:border-gold focus:ring-1 focus:ring-gold transition-colors" required></textarea>
                    <button type="submit" class="btn-gold w-full py-3 font-semibold rounded-full shadow-lg hover:shadow-xl transition duration-300">Enviar Mensaje</button>
                </form>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900/50 border-t border-rosegold/20 py-8">
        <div class="container mx-auto px-4 text-center text-sm text-silver/70">
            <p>&copy; 2025 EyASur.Ok. Todos los derechos reservados.</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="hover:text-gold transition-colors">Política de Privacidad</a>
                <a href="#" class="hover:text-gold transition-colors">Términos de Servicio</a>
            </div>
        </div>
    </footer>

    <!-- Modal del Carrito -->
    <div id="cart-modal" class="fixed inset-0 bg-black-deep/90 backdrop-blur-sm z-50 hidden" onclick="if(event.target.id === 'cart-modal') window.toggleCartModal()">
        
        <!-- Contenido del Modal (Panel lateral) -->
        <div class="absolute top-0 right-0 w-full max-w-sm h-full bg-gray-900 border-l border-gold/50 shadow-2xl flex flex-col transform translate-x-0 transition-transform duration-300">
            
            <!-- Encabezado del Carrito -->
            <div class="flex justify-between items-center p-5 border-b border-gold/20 bg-gray-900 sticky top-0">
                <h3 class="text-3xl font-bold text-gold">Tu Carrito</h3>
                <button onclick="window.toggleCartModal()" class="text-silver hover:text-gold transition-colors p-2 rounded-full hover:bg-black-deep/50" aria-label="Cerrar Carrito">
                    <i data-lucide="x" class="w-7 h-7"></i>
                </button>
            </div>

            <!-- Ítems del Carrito (Contenedor con scroll) -->
            <div id="cart-items-container" class="flex-grow overflow-y-auto custom-scrollbar">
                <!-- Los ítems se insertan aquí mediante JavaScript -->
            </div>

            <!-- Botón de Checkout/Finalizar Compra -->
            <div class="p-5 border-t border-gold/20 bg-gray-900 sticky bottom-0">
                <p class="text-xl font-bold text-silver mb-3 flex justify-between">
                    <span>Total Estimado:</span>
                    <span class="text-gold">$<span id="cart-total-display">0.00</span></span>
                </p>
                
                <button id="checkout-button" onclick="window.checkout()"
                    class="w-full btn-gold py-3 rounded-full font-bold text-lg hover:shadow-xl transition-all">
                    Finalizar Compra
                </button>
            </div>

            <!-- Nota de usuario -->
            <div class="p-2 bg-rosegold/10 text-xs text-silver/70 text-center border-t border-rosegold/30">
                <i data-lucide="user" class="w-4 h-4 inline mr-1"></i>
                ID de Sesión: <span class="font-mono text-gold/80" id="user-id-display-modal">Cargando...</span>
            </div>
        </div>
    </div>


</body>
</html>
